{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Courses</h2>
<p class="small text-secondary">
  Pick a subject and teacher that match your style. You don't have to buy everything – start with one part,
  feel progress, then decide.
</p>
<div class="row g-3 mt-2">
  {% for course in courses %}
    <div class="col-md-4">
      <div class="nok-card p-3 h-100 d-flex flex-column">
        <span class="badge bg-success mb-2">{{ course.subject }}</span>
        <h5>{{ course.title }}</h5>
        <small class="text-secondary">by {{ course.teacher.display_name }}</small>
        {% with avg=course.average_rating %}
          {% if avg %}
            <div class="small text-warning mt-1">
              ★ {{ avg|floatformat:1 }} / 5.0
            </div>
          {% endif %}
        {% endwith %}
        <p class="small text-secondary mt-2 mb-3 flex-grow-1">
          {{ course.description|truncatechars:140 }}
        </p>
        <a href="{% url 'courses:course_detail' course.id %}" class="btn btn-outline-light btn-sm mt-auto">View details</a>
      </div>
    </div>
  {% empty %}
    <p class="text-secondary">No courses yet. Add them via admin.</p>
  {% endfor %}
</div>
{% endblock %}
